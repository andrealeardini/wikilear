<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="dark light" />
    <title>{{ title }}</title>
    <script>
      // detect dark mode settings (dark, light, system preference)
      const theme = localStorage.getItem('theme');
      if (
        theme === "dark"
      ) {
        document.querySelector("html").classList.add("dark");
      } else if (theme === "light") {
        document.querySelector("html").classList.remove("dark");
      } else if (theme === "system" ||
        !theme) {
            localStorage.setItem('theme', 'system');
            if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
              document.querySelector("html").classList.add("dark");
            }
      }
    </script>
    {% if environment.NODE_ENV=="production" %}
    <!-- capture the CSS content as a Nunjucks variable -->
    {% set css %} {% include "../../../dist/css/styles.css" %} {% endset %}
    <!-- feed it through our cssmin filter to minify -->
    <style>
      {{ css | cssmin | safe }}
    </style>
    {% else %}
    <link rel="stylesheet" href="/css/styles.css" />
    {% endif %}
  </head>
  <body class="h-screen box-border bg-gray-200">
    <div
      class="min-h-full grid grid-cols-12 grid-rows-layout dark:bg-gray-600"
    >
      <div class="col-start-1 col-end-13 row-start-1 row-end-5">
        <div class="z-10 row-start-1 row-end-2 fixed h-12 w-full">
          {% include "components/navbar/navbar.njk" %}
        </div>
        <button
          id="inert"
          class="h-full w-full fixed bg-white opacity-50 cursor-default hidden"
        ></button>
        <div
          id="content"
          class="mt-12 h-full mx-auto pt-6 px-4 md:px-8 max-w-ch-70 text-base bg-white dark:bg-gray-900 md:text-md lg:text-lg"
        >
          {% include "components/breadcrumbs.njk" %} {% block content %}{%
          endblock %}
        </div>
      </div>
      <div
        id="footer"
        class="col-start-1 col-end-13 row-start-5 row-end-6 mt-6 pt-6 px-4 pb-6 bg-gray-300 dark:bg-gray-700"
        >
        {% include "components/darkMode/darkmode.njk" %}
        <div class="m-auto text-center">
          <a
            class="font-semibold mr-4"
            href="/termini-uso-privacy"
            >Cookie, Privacy e termini d'uso</a
          >
        </div>
        <p class="m-auto max-w-lg text-center text-sm mt-6">
          Copyright © 2011-2020 Andrea Leardini.<span class="md:hidden"
            ><br
          /></span>
          Quest'opera è distribuita con
          <a
            class="font-semibold"
            href="http://creativecommons.org/licenses/by/4.0/"
            target="_blank"
            rel="noopener noreferrer"
            >licenza Creative Commons Attribuzione 4.0 Internazionale.</a
          >
          Salvo diversa indicazione, il codice è distribuito con
          <a
            class="font-semibold"
            href="https://opensource.org/licenses/MIT"
            target="_blank"
            rel="noopener noreferrer"
            >licenza MIT.</a
          >
        </p>
      </div>
    </div>
    <script type="module" src="/js/main.js"></script>
  </body>
</html>
